---
layout: default
title: Profiles
parent: Project / Target Management
nav_order: 1
---

# Profiles
Each NINA profile is represented with a (possibly empty) folder in the navigation trees.  Your projects, targets, etc are explicitly associated with a single NINA profile since the associated settings will likely depend on the equipment defined for that profile.

If you delete a profile that had Target Scheduler entities assigned to it, they are not lost, but they are [orphaned](index.html#orphaned-items).

## Import/Export
You can export an entire profile - profile preferences, projects, targets, exposure templates and (optionally) the associated acquired image data.  The dataset is saved to a Zip file and can be imported to another profile on the current NINA instance or to an instance on a completely different PC.

During an import, the current (importing) Target Scheduler database version is compared to the export.  If the export version is newer, the import will be canceled and you must update the import version.  If the import version is newer, you will be given the option to continue or cancel.  In most cases, it is safe to continue but problems may occur.  The TS [release notes](../release.html) should mention whether a database version change will break import of older profile exports.  Although the database version changes much less frequently than plugin versions, it does change on occasion.

An export is simply a zip file containing the following files in JSON format:
* A metadata file describing the export: export date, profile name, plugin version, and database version
* projects.json with all projects, related targets and exposure plans
* exposureTemplates.json with all exposure templates
* acquiredImages.json with all acquired image rows (optional output)
* imageData.json with all image data rows including thumbnail images (optional output)


### Export Profile
To export, select the desired profile in the Projects tree and then click the export icon.  The Export Profile section will expand and you can select the Zip file and indicate whether any acquired image data should also be exported.  Click the export icon at the bottom of the section to run the export.

If the export succeeded, a pop-up will appear detailing the number of projects, targets, etc.

#### Export Notes
* Not all database tables are exported: the table that records flats status/history is not, as well as the table that stores the next exposure in a target's filter cadence.
* The operation assumes there is sufficient space in your local Windows Temp directory to serialize all the data before the zip compression.  In general, this is not an issue but if you are exporting a large amount of acquired image data, it could be significant.

### Import Profile
To import, select the desired profile in the Projects tree and then click the import icon.  The Import Profile section will expand and you can select the Zip file and indicate whether any acquired image data should also be imported.  Click the import icon at the bottom of the section to run the import.

After import, you will need to refresh the projects and exposure templates trees in the left nav to see the changes.

#### Import Notes
* The profile used for import does not have to be empty.  But if it is not and contains projects or exposure templates with the same name as any in the export, they will _not_ be renamed when imported, and you will get multiple projects or exposure templates with the same name.
* Any exposure templates in the import will reference filters by name that are in use on the exporting system (defined in Options > Equipment > Filter Wheel).  When you import these exposure templates to a different profile or instance of NINA, those filters may not be defined.  Although the import will succeed, it will list the filters referenced in the export.  Before trying to use the imported projects - in a preview or otherwise - you should ensure that those filters are defined in the filter wheel for this profile.  Alternatively, you could edit the exposure templates and change the filter to one referenced in that profile.
* If the profile used for import has changed any of the default profile preferences, they will not be overridden by an import.

### Import Targets
You can also load multiple targets from a CSV file.  See [Bulk Target Import](targets.html#bulk-target-import) for details.

## Profile Preferences
A set of preferences can be managed for each profile and will impact execution of all projects and targets associated with that profile.

### General Preferences

| Property                | Type   | Default | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|:------------------------|:-------|:--------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Log Level               | string | Debug   | Set the log level used by Target Scheduler.  Note Target Scheduler logs to a separate file from NINA, stored in %localappdata%\NINA\SchedulerPlugin\Logs\.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Park On Wait            | bool   | false   | Normally, when the planner returns a directive to wait a period of time for the next target, the plugin will simply stop tracking and guiding.  If this setting is true (and the wait is more than one minute), the mount will also be parked and then unparked when the wait is over.  If you instead use the [Before Wait/After Wait](../sequencer/index.html#custom-event-instructions) custom containers to park and unpark, you should leave this set to false.                                                                                                                                     |
| Exposure Throttle       | int    | 125%    | When Image Grading is disabled (at the Project level) and the Accepted count on Exposure Plans isn't incremented manually, the planner will keep scheduling exposures - perhaps way beyond what is reasonable.  The Exposure Throttle will instead use the total number Acquired (displayed with Desired and Accepted) to stop exposures when the number Acquired is greater than Exposure Throttle times the number Desired.  For example, if Exposure Throttle is 150%, Desired=10, and Acquired=5 then an additional 10 exposures will be scheduled.  This has no effect if Image Grading is enabled. |
| Delete Acquired Images  | bool   | true    | If enabled, whenever a target is deleted, any [Acquired Image](../post-acquisition/acquisition-data.html) records associated with that target will also be deleted.  This also applies to targets deleted when the parent project is deleted.  In general, you should leave this enabled since deleting targets but leaving the acquired image records may lead to confusion since database IDs can be reused.  No actual image files will ever be deleted.                                                                                                                                              |
| Enable slew/center      | bool   | true    | Enable/disable the default behavior where the plugin will automatically slew and center on selected targets as needed.  You should only disable this if you are separately arranging for target pointing.                                                                                                                                                                                                                                                                                                                                                                                                |
| Enable stop on humidity | bool   | true    | If true and all remaining targets have been rejected for humidity, then stop for the night (basically assuming that humidity is very unlikely improve).                                                                                                                                                                                                                                                                                                                                                                                                                                                  |


### Image Grader
The following preferences drive the behavior of the [Image Grader](../post-acquisition/image-grader.html).  Since projects have grading enabled by default and all types of grading (below) are also enabled by default, your images will be graded unless you take steps to disable it.  The defaults were selected to be relatively permissive.

| Property                       | Type    | Default | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|:-------------------------------|:--------|:--------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Enable RMS Error Grading       | bool    | true    | Enable grading based on the total RMS guiding error during the exposure                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Enable Star Count Grading      | bool    | true    | Enable grading for the number of detected stars                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Enable HFR Grading             | bool    | true    | Enable grading based on calculated image HFR                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Enable FWHM Grading            | bool    | false   | Enable grading based on calculated image Full Width Half Maximum.  The Hocus Focus plugin must be installed, enabled, and set up for Star Detection (Fit PSF ON).  Be sure you have enabled Hocus Focus in Options > Imaging > Image options.                                                                                                                                                                                                                                                                                                                       |
| Enable Eccentricity Grading    | bool    | false   | Enable grading based on calculated image Eccentricity.  The Hocus Focus plugin must be installed, enabled, and set up for Star Detection (Fit PSF ON).  Be sure you have enabled Hocus Focus in Options > Imaging > Image options.                                                                                                                                                                                                                                                                                                                                  |
| Accept All Improvements        | bool    | true    | Grading on star count, HFR, FWHM, and Eccentricity will be biased based on the samples used for comparison.  If they are sub-optimal in some way (bad seeing, passing cloud) then subsequent images with significant improvements may be rejected for falling outside the standard deviation range - and the set of comparison samples will not improve.  If this setting is true, then a new image with a sample value greater than (for star count) or less than (for HFR, FWHM, Eccentricity) the mean of the comparison samples will be automatically accepted. |
| Move Rejected Images           | bool    | false   | If enabled and a graded image was rejected, it will be moved to a 'rejected' folder under the image save folder.  See note below.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Max Samples                    | int     | 10      | The maximum number of recent images to use for sample determination (unused if delayed grading is enabled)                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Delay Grading                  | percent | 80%     | Delay grading on an exposure plan until this percentage of images have been acquired (acquired/desired).  Set to 0% to disable.                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| RMS Pixel Threshold            | double  | 8       | The threshold to accept/reject based on guiding RMS error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Stars Sigma Factor             | double  | 4       | The number of standard deviations surrounding the mean for acceptable star count values                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| HFR Sigma Factor               | double  | 4       | The number of standard deviations surrounding the mean for acceptable values of HFR                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| FWHM Sigma Factor              | double  | 4       | The number of standard deviations surrounding the mean for acceptable values of FWHM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Eccentricity Sigma Factor      | double  | 4       | The number of standard deviations surrounding the mean for acceptable values of FWHM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| HFR Auto Accept Level          | double  | 0       | When testing HFR, automatically accept if HFR value is less than this value.  Set to zero to disable.                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| FWHM Auto Accept Level         | double  | 0       | When testing FWHM, automatically accept if FWHM value is less than this value.  Set to zero to disable.                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Eccentricity Auto Accept Level | double  | 0       | When testing Eccentricity, automatically accept if Eccentricity value is less than this value.  Set to zero to disable.                                                                                                                                                                                                                                                                                                                                                                                                                                             |

#### Move Rejected Images
* Moving images may have undesirable impacts to other code (including plugins) that expects to find images in a specific location.  Potential plugin impacts:
  * Remote Copy.  In general, the source directory for Robocopy is above the actual save location in the folder hierarchy so it should work but you should verify.
  * Web Session History Viewer.  Although the image thumbnails will continue to work, clicking an image to see the source image will not since it was moved from the expected location.  This may be addressed in a future release of the Web plugin.
* If you're using [synchronization](../synchronization.html) and want to enable this, be sure to enable it in the profile preferences for both the server and client profiles.
* If delayed grading is enabled, then grading may not occur until long after the exposure was taken.  If the source image has been moved or deleted, the move operation will silently fail.

### Synchronization Preferences
The following preferences control [synchronization](../synchronization.html).

| Property                | Type | Default | Description                                                                                                                                                                                                                                                        |
|:------------------------|:-----|:--------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Enable Synchronization  | bool | false   | Enable synchronization for this profile.                                                                                                                                                                                                                           |
| Wait Timeout            | int  | 300     | The timeout (in seconds) used by the [Target Scheduler Sync Wait](../synchronization.html#target-scheduler-sync-wait) instruction on both sync server and client instances.                                                                                        |
| Action Timeout          | int  | 300     | The timeout (in seconds) used by the server when waiting for all clients to accept an _action_: an exposure, a solve/rotate command, or a custom event container.  See [Target Scheduler Sync Container](../synchronization.html#target-scheduler-sync-container). |
| Solve/Rotate Timeout    | int  | 300     | The timeout (in seconds) used by the server when waiting for all clients to complete a solve/rotate command.  See [Slew/Center/Rotate](../synchronization.html#slewcenterrotate).                                                                                  |
| Event Container Timeout | int  | 300     | The timeout (in seconds) used by the server when waiting for all clients to complete a custom event container.  See [Target Scheduler Sync Container](../synchronization.html#target-scheduler-sync-container).                                                    |

### Simulation Preferences

{: .warning }
This is really for developers or sophisticated users only.

It can be very complex to test the operation of the plugin, especially in the context of a running sequence.  However, the plugin can be put into simulation mode where the planner manages the 'current time' itself, as opposed to using the system clock.  In this mode, it can skip over wait periods and emulate operation throughout a night.

Simulated execution places severe constraints on your sequence.  In particular, you cannot use core NINA instructions that wait for or loop for specific times such as dusk.  Those commands will use system time and interfere with simulated time.

| Property                   | Type | Default | Description                                                                                                      |
|:---------------------------|:-----|:--------|:-----------------------------------------------------------------------------------------------------------------|
| Enable Simulated Execution | bool | false   | Enable simulated execution for this profile.                                                                     |
| Skip Waits                 | bool | true    | If true, the TS Container instruction will skip over wait plans and continue as if the wait time had passed.     |
| Skip Database Updates      | bool | false   | If true, the usual database updates that occur during operation will be skipped for simulated runs.              |

